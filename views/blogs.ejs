<%- include("partials/header"); -%>

<!-- Category Filter Form -->
<form method="GET" action="/blogs" style="margin-bottom: 20px;">
    <select name="category" onchange="this.form.submit()">
        <option value="">All Categories</option>
        <% categories.forEach(function(category) { %>
            <option value="<%= category._id %>" <%= category._id.toString() === selectedCategory ? 'selected' : '' %>>
                <%= category.name %>
            </option>
        <% }); %>
    </select>
</form>

<div class="grid grid-columns-3 gap-3 px-3" style="margin-bottom:5%;">
    <% blogs.forEach(function(blog) { %>
        <div class="card"
            style="display: flex; flex-direction: column; justify-content: space-between; padding-bottom: 10px;">
            <div class="card-header">
                <a href="/blogs/<%= blog.title %>">
                    <img src="<%= blog.image %>" class="card-image" alt="Image not Available">
                </a> 
            </div>
            <div class="card-body card-hover" style="width: max-width; height: max-content;">
                <h2 class="card-title">
                    <a href="/blogs/<%= blog.title %>"><%= blog.title %></a>
                </h2>
                <!-- Display Category -->
                <h4 class="card-category" style="color: gray;">Category: <%= blog.category.name %></h4>
                <div class="card-content">
                    <p class="card-text">
                        <%= blog.content.substring(0, 100) + " ..." %>
                    </p>
                </div>
            </div>
            <div class="card-footer" style="width: 100px;align-self: flex-end; margin-right: 20px;">
                <a href="/blogs/<%= blog.title %>" class="btn btn-primary">Read more</a>
            </div>
        </div>
    <% }); %>
</div>

<%- include("partials/footer"); -%>
